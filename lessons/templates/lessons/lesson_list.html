{% extends "base.html" %}
{% load static %}

{% block title %}–ù–∞—à—ñ –≤–µ—Å–µ–ª—ñ —É—Ä–æ–∫–∏ ‚Äî Dr Rainbow{% endblock %}

{% block content %}
<section class="panel" aria-label="–°–ø–∏—Å–æ–∫ —É—Ä–æ–∫—ñ–≤" style="padding:1.5rem">
  <h2 style="margin-top:0">üìö –ù–∞—à—ñ –≤–µ—Å–µ–ª—ñ —É—Ä–æ–∫–∏</h2>
  <p class="muted">–û–±–µ—Ä—ñ—Ç—å —Ç–µ–º—É ‚Äî —ñ –≥–∞–π–¥–∞ –≤ –ø—Ä–∏–≥–æ–¥—É –∑ –¥–æ–∫—Ç–æ—Ä–æ–º –í–µ—Å–µ–ª–∫–æ—é!</p>

  <div style="
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
  ">
    {% for l in lessons %}
      <article class="panel" style="
        width: 100%;
        padding: 1rem;
        display: grid;
        gap: 0.75rem;
        transition: transform 0.2s ease;
        cursor: pointer;
      " onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
        <div style="display: flex; gap: 1rem; align-items: center">
          <div style="flex-shrink: 0">
            <img src="{% static l.assistant_image %}" alt="–ü–æ–º—ñ—á–Ω–∏–∫" style="height: 64px; border-radius: 12px">
          </div>
          <div>
            <h3 style="margin: 0">{{ l.emoji }} {{ l.title }}</h3>
            <p class="muted" style="margin: .25rem 0 0">{{ l.summary|truncatewords:16 }}</p>
          </div>
        </div>

        <div style="display: flex; flex-wrap: wrap; gap: .5rem">
          {% if l.level %}<span title="–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å" style="font-size:.8rem;padding:.2rem .5rem;border-radius:999px;border:1px solid var(--ring);background:#f8fafc">‚≠ê {{ l.level }}</span>{% endif %}
          {% if l.duration %}<span title="–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å" style="font-size:.8rem;padding:.2rem .5rem;border-radius:999px;border:1px solid var(--ring);background:#fff7ed">‚è±Ô∏è {{ l.duration }} —Ö–≤</span>{% endif %}
          {% if l.age_range %}<span title="–í—ñ–∫" style="font-size:.8rem;padding:.2rem .5rem;border-radius:999px;border:1px solid var(--ring);background:#ecfeff">üëß {{ l.age_range }}</span>{% endif %}
        </div>

        <div style="display: flex; gap: .5rem; flex-wrap: wrap">
          {% if l.slug %}
            <a class="btn" href="{% url 'lesson_detail' l.slug %}">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ ‚ûú</a>
            <a class="app-btn" href="{% url 'lesson_exercise_list' l.slug %}">–ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏</a>
          {% else %}
            <span class="muted" title="–£—Ä–æ–∫ –±–µ–∑ –∞–¥—Ä–µ—Å–∏">‚õî –ë–µ–∑ –¥–æ—Å—Ç—É–ø—É</span>
          {% endif %}
        </div>
      </article>
    {% empty %}
      <p class="muted">–ü–æ–∫–∏ —â–æ —É—Ä–æ–∫—ñ–≤ –Ω–µ–º–∞—î üò¢</p>
    {% endfor %}
  </div>
</section>
{% endblock %}

