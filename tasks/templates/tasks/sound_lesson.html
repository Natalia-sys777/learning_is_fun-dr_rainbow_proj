{% extends "base.html" %}
{% load static %}

{% block title %}–ü–æ–¥–æ—Ä–æ–∂ –∑–≤—É–∫–æ–º ‚Äî Dr Rainbow{% endblock %}

{% block content %}
<section class="panel" style="padding:2rem;display:grid;gap:2rem;max-width:900px;margin:auto">

  <!-- –ê—Å–∏—Å—Ç–µ–Ω—Ç –ú–∞—Ä–∫–æ —É —Å—Ç–∏–ª—ñ –∫–æ–º—ñ–∫—Å—É -->
  <div style="display:flex;gap:1.5rem;align-items:center">
    <img src="{% static 'images/assistant_boy.png' %}" alt="–ú–∞—Ä–∫–æ –≤ —Å—Ç–∏–ª—ñ –∫–æ–º—ñ–∫—Å—É" style="height:160px;border-radius:16px;border:4px solid #a5f3fc;background:#ecfeff">
    <div style="background:#fffbea;border-left:6px solid #fde68a;padding:1rem 1.25rem;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.08)">
      <p style="margin:0; font-size:1.2rem; line-height:1.5">
        <strong>–ü—Ä–∏–≤—ñ—Ç, —è –ú–∞—Ä–∫–æ! üéß</strong><br>
        –°—å–æ–≥–æ–¥–Ω—ñ –º–∏ –¥—ñ–∑–Ω–∞—î–º–æ—Å—å, —â–æ —Ç–∞–∫–µ –∑–≤—É–∫ —ñ —è–∫ –π–æ–≥–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—Ç–∏! –ü—Ä–∏–≥–æ—Ç—É–π –≤—É—à–∫–∞ ‚Äî –±—É–¥–µ —Ü—ñ–∫–∞–≤–æ!
      </p>
    </div>
  </div>

  <!-- –í—Å—Ç—É–ø–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
  <article class="panel" style="background:#f0fdf4;padding:1rem;border-radius:12px">
    <h2 style="margin-top:0">üîç –©–æ —Ç–∞–∫–µ –∑–≤—É–∫?</h2>
    <p>–ó–≤—É–∫ ‚Äî —Ü–µ –≤—ñ–±—Ä–∞—Ü—ñ—ó, —è–∫—ñ –º–∏ —á—É—î–º–æ. –ö–æ–ª–∏ —â–æ—Å—å —Ç—Ä–µ–º—Ç–∏—Ç—å, –≤–æ–Ω–æ —Å—Ç–≤–æ—Ä—é—î —Ö–≤–∏–ª—ñ –≤ –ø–æ–≤—ñ—Ç—Ä—ñ, –∞ –Ω–∞—à—ñ –≤—É—Ö–∞ —ó—Ö —Å–ø—Ä–∏–π–º–∞—é—Ç—å.</p>
  </article>

  <!-- –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –≤–ø—Ä–∞–≤–∞ -->
  <section class="panel" style="background:#f9fafb;padding:1.5rem;border-radius:16px">
    <h2 style="margin-top:0">üéØ –í–≥–∞–¥–∞–π –¥–∂–µ—Ä–µ–ª–æ –∑–≤—É–∫—É</h2>
    <p class="muted">'–ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É, –ø—Ä–æ—Å–ª—É—Ö–∞–π –∑–≤—É–∫ —ñ –æ–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É –∫–∞—Ä—Ç–∏–Ω–∫—É.'</p>

    <div style="display:flex;flex-direction:column;gap:1rem;margin-top:1rem">
      <button onclick="playSound(0)" class="btn">üîä –ü—Ä–æ–≥—Ä–∞—Ç–∏ –∑–≤—É–∫ 1</button>
      <button onclick="playSound(1)" class="btn">üîä –ü—Ä–æ–≥—Ä–∞—Ç–∏ –∑–≤—É–∫ 2</button>
      <button onclick="playSound(2)" class="btn">üîä –ü—Ä–æ–≥—Ä–∞—Ç–∏ –∑–≤—É–∫ 3</button>

      <div style="display:flex;gap:1rem;flex-wrap:wrap;margin-top:1rem">
        <button onclick="checkAnswer(0, 'door')" class="app-btn">üö™ –î–≤–µ—Ä—ñ</button>
        <button onclick="checkAnswer(1, 'dog')" class="app-btn">üê∂ –°–æ–±–∞–∫–∞</button>
        <button onclick="checkAnswer(2, 'drum')" class="app-btn">ü•Å –ë–∞—Ä–∞–±–∞–Ω</button>
      </div>

      <p id="result" class="muted" style="margin-top:1rem;font-weight:bold;"></p>
    </div>
  </section>

  <script>
    const sounds = [
      new Audio("{% static 'audio/door_creak.mp3' %}"),
      new Audio("{% static 'audio/dog_bark.mp3' %}"),
      new Audio("{% static 'audio/drum_hit.mp3' %}")
    ];

    const answers = ['door', 'dog', 'drum'];
    let currentIndex = null;

    function playSound(index) {
      currentIndex = index;
      sounds[index].play();
      document.getElementById('result').textContent = "üéß –°–ª—É—Ö–∞—î–º–æ...";
    }

    function checkAnswer(index, choice) {
      if (currentIndex === null) {
        document.getElementById('result').textContent = "–°–ø–æ—á–∞—Ç–∫—É –ø—Ä–æ—Å–ª—É—Ö–∞–π –∑–≤—É–∫!";
        return;
      }
      const correct = answers[currentIndex];
      if (choice === correct) {
        document.getElementById('result').textContent = "‚úÖ –ú–æ–ª–æ–¥–µ—Ü—å! –¶–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!";
      } else {
        document.getElementById('result').textContent = "‚ùå –•–º–º... –¶–µ –Ω–µ —Ç–æ–π –∑–≤—É–∫. –°–ø—Ä–æ–±—É–π —â–µ!";
      }
    }
  </script>

</section>
{% endblock %}

